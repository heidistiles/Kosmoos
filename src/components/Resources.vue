<script setup>
import BaseTemplate from "../templates/BaseTemplate.vue";
import resourceData from "../data_sources/ResearchResources.js";
import {useRoute} from "vue-router";
import Card from "./Card.vue";
import {onMounted, ref} from "vue";
import Box from "./Box.vue";
import Dash from "./Dash.vue";
import Circle from "./Circle.vue";

const route = useRoute();
let type = route.params.resourceType;
let resources = ref([])
let isFiltered = ref(false)

onMounted(() => {
  resources = resourceData.data.filter(resource => resource.type === type)
  isFiltered.value = true
})

if (type === "books") {
  document.title = 'Book Research Resources'
}

if (type === "videos") {
  document.title = 'Video Research Resources'
}

if (type === "websites") {
  document.title = 'Website Research Resources'
}

if (type === "locations") {
  document.title = 'Location Research Resources'
}

</script>

<template>
  <base-template>
    <card>
      <div class="big circle">
        <circle>
          <svg v-if="type === 'books'" class="book" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.583333 13.2291675" version="1.1" x="0px" y="0px">
            <g transform="translate(0,0.5291667)"><path style="color:currentColor;paint-order:fill markers stroke;" d="m 2.6379522,1.4135878 c -0.19279,8e-4 -0.38758,0.013 -0.583569,0.035 a 0.26459551,0.26459551 0 0 0 -0.234088,0.262787 v 0.359681 h -0.761961 a 0.26459551,0.26459551 0 0 0 -0.26458603,0.264486 v 5.511414 a 0.26459551,0.26459551 0 0 0 0.38508003,0.235588 c 1.098743,-0.562471 2.544068,-0.754561 4.073289,-0.521273 a 0.26456906,0.26456906 0 0 0 0.01,5e-4 0.26456906,0.26456906 0 0 0 0.018,0 0.26459551,0.26459551 0 0 0 0.011,4e-4 0.26459551,0.26459551 0 0 0 0.011,-5e-4 0.26456906,0.26456906 0 0 0 0.019,0 0.26456906,0.26456906 0 0 0 0.01,-5e-4 c 1.52932,-0.233288 2.974645,-0.041 4.073388,0.521273 a 0.26459551,0.26459551 0 0 0 0.38508,-0.235588 v -5.511414 a 0.26459551,0.26459551 0 0 0 -0.26459,-0.264486 h -0.76236 v -0.359681 a 0.26459551,0.26459551 0 0 0 -0.234088,-0.262787 c -0.19599,-0.023 -0.39078,-0.034 -0.58357,-0.035 -0.97185,0 -1.892702,0.266986 -2.653862,0.792459 -0.761161,-0.525473 -1.682013,-0.796959 -2.653963,-0.792459 z m 0,0.528873 c 0.887154,0 1.712811,0.246987 2.387076,0.724462 v 4.137985 c -0.784259,-0.460776 -1.711411,-0.672365 -2.677861,-0.614368 v -3.8501 a 0.26456906,0.26456906 0 0 0 2e-4,0 0.26456906,0.26456906 0 0 0 -2e-4,0 v -0.38098 c 0.09799,-0.01 0.19459,-0.01 0.290785,-0.011 z m 5.303225,0 c 0.096,5e-4 0.19329,0 0.290785,0.011 v 4.23728 c -0.96645,-0.058 -1.893602,0.153592 -2.677761,0.614368 v -4.137985 c 0.674265,-0.477475 1.499822,-0.728962 2.386976,-0.724462 z m -6.620556,0.657965 h 0.497374 v 3.878599 a 0.26459551,0.26459551 0 0 0 0.295085,0.262887 c 0.682064,-0.079 1.33933,-0.011 1.933699,0.19329 -0.985549,-0.01 -1.916,0.160191 -2.726158,0.498474 z m 7.440514,0 h 0.497774 v 4.83325 c -0.810258,-0.338383 -1.74081,-0.505474 -2.726459,-0.498474 0.594269,-0.20379 1.251535,-0.272486 1.9336,-0.19329 a 0.26459551,0.26459551 0 0 0 0.295085,-0.262887 z" fill="currentColor" fill-rule="evenodd" stroke-width="0.00247292" stroke-linecap="round" stroke-linejoin="round"/></g>
          </svg>
          <svg v-if="type === 'videos'" class="video" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-5.0 -10.0 110.0 110.0" fill="currentColor">

            <path d="m88.891 4.8594h-77.781c-4.582 0-8.332 3.75-8.332 8.332v50c0 4.582 3.75 8.332 8.332 8.332h77.777c4.582 0 8.332-3.75 8.332-8.332l0.003906-49.996c0-4.582-3.75-8.332-8.332-8.332zm2.7773 58.336c0 1.5273-1.25 2.7773-2.7773 2.7773h-77.781c-1.5273 0-2.7773-1.25-2.7773-2.7773v-50c0-1.5273 1.25-2.7773 2.7773-2.7773h77.777c1.5273 0 2.7773 1.25 2.7773 2.7773v50zm-30.391-29.805-17-9.832c-1.75-1-3.8047-1-5.5547 0s-2.7773 2.8047-2.7773 4.8047v19.641c0 2 1.0273 3.8047 2.7773 4.8047 0.85938 0.5 1.832 0.75 2.7773 0.75s1.918-0.25 2.7773-0.75l17-9.832c1.75-1 2.7773-2.8047 2.7773-4.8047s-1.0273-3.8047-2.7773-4.8047zm-19.777 14.637v-19.641l17 9.832-17 9.832zm52.945 34.613h-58.777c-1.1953-4-4.8906-6.9453-9.2773-6.9453-4.3906 0-8.0547 2.9453-9.2773 6.9453h-11.559c-1.5273 0-2.7773 1.25-2.7773 2.7773 0 1.5273 1.25 2.7773 2.7773 2.7773h11.555c1.1953 4 4.8906 6.9453 9.2773 6.9453 4.3906 0 8.0547-2.9453 9.2773-6.9453h58.777c1.5273 0 2.7773-1.25 2.7773-2.7773 0-1.5273-1.25-2.7773-2.7773-2.7773zm-68.055 6.9414c-2.3047 0-4.168-1.8594-4.168-4.168 0-2.3047 1.8594-4.168 4.168-4.168 2.3047 0 4.168 1.8594 4.168 4.168 0 2.3047-1.8594 4.168-4.168 4.168z"/>
        </svg>
          <svg v-if="type === 'websites'" class="website" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-5.0 -10.0 110.0 110.0" fill="currentColor">
            <g>
            <path d="m66.918 94.793c-2.668 0-5.168-1.457-6.418-3.832-0.20703-0.375-0.375-0.83203-0.5-1.207l-10.293-30.793c-0.91797-2.625-0.25-5.543 1.75-7.5 2-2 4.875-2.668 7.5-1.75l30.793 10.293c0.33203 0.125 0.83203 0.25 1.332 0.58203 2.418 1.293 3.918 4.082 3.668 7-0.25 2.957-2.168 5.332-5 6.25l-11.457 3.832c-0.33203 0.125-0.54297 0.33203-0.66797 0.66797l-3.832 11.457c-0.91797 2.793-3.293 4.707-6.25 4.957h-0.66797zm-10.336-39.25c-0.33203 0-0.58203 0.16797-0.70703 0.29297-0.16797 0.16797-0.41797 0.54297-0.25 1.082l10.293 30.832c0.375 0.79297 0.91797 0.75 1.082 0.75 0.45703 0 0.75-0.29297 0.875-0.70703l3.832-11.5c0.75-2.207 2.418-3.875 4.625-4.582l11.457-3.832c0.45703-0.125 0.66797-0.45703 0.70703-0.875 0-0.16797 0-0.70703-0.5-1l-31.082-10.375s-0.25-0.082031-0.375-0.082031z"/>
            <path d="m56.832 92.918c-0.33203-0.54297-0.58203-1.293-0.79297-1.918l-1.332-4c-1.293 0.83203-2.625 1.375-4 1.5h-0.70703-0.75c-5.418-0.54297-11.082-7.625-14.293-18.707h14l-2.082-6.25h-13.332c-0.75-4.168-1.207-8.668-1.207-13.543s0.45703-9.375 1.207-13.543h33c0.66797 3.625 1.043 7.582 1.125 11.75l6.332 2.125v-0.33203c0-4.75-0.375-9.293-1.082-13.543h13.125c1.625 4.25 2.543 8.793 2.543 13.543 0 1.707-0.125 3.418-0.33203 5.082l2.918 0.95703c0.45703 0.16797 1.25 0.41797 2.168 0.95703 0.33203 0.16797 0.58203 0.375 0.91797 0.58203 0.41797-2.5 0.66797-5 0.66797-7.582 0-24.082-19.582-44.168-43.332-44.707-0.375-0.042968-0.875-0.082031-1.293-0.082031h-0.25c-0.5 0-0.91797 0-1.043 0.042969h-0.16797-0.082032c-24.09 0.75-43.551 20.75-43.551 44.75s19.582 44.168 43.332 44.707c0.45703 0.042969 0.95703 0.082031 1.457 0.082031h1.125c2.207-0.042968 4.375-0.25 6.543-0.625-0.29297-0.41797-0.625-0.75-0.875-1.168zm26.125-62.711h-11.375c-1.582-6.207-3.918-11.582-6.793-15.707 7.582 3.207 13.918 8.75 18.168 15.707zm-33.664-18.75h0.70703 0.75c5.418 0.54297 11.082 7.625 14.293 18.707h-30.082c3.207-11.082 8.875-18.168 14.332-18.75zm-14.086 3.0859c-2.875 4.168-5.168 9.5-6.75 15.668h-11.375c4.207-6.918 10.543-12.457 18.125-15.668zm-23.75 35.457c0-4.75 0.91797-9.293 2.543-13.543h13.125c-0.70703 4.25-1.082 8.793-1.082 13.543s0.375 9.293 1.082 13.543h-13.125c-1.625-4.25-2.543-8.793-2.543-13.543zm5.5859 19.793h11.375c1.582 6.207 3.918 11.582 6.793 15.707-7.582-3.207-13.918-8.75-18.168-15.707z"/>
          </g>
        </svg>
          <svg v-if="type === 'locations'" class="location" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-5.0 -10.0 110.0 110.0" fill="currentColor">
          <path d="m82.754 35.262c0.007813 6.3242-2.7461 13.734-6.7305 20.957-2.8516 5.168-6.3477 10.277-9.9023 14.828 2.5352 1.1172 4.6836 2.5 6.2969 4.0742 2.2617 2.2031 3.5469 4.7852 3.5469 7.5977 0 4.3906-3.1445 8.2344-8.2188 10.891-4.5938 2.4023-10.871 3.8906-17.746 3.8906-6.8711 0-13.152-1.4883-17.746-3.8906-5.0781-2.6562-8.2188-6.5-8.2188-10.891 0-2.8047 1.2812-5.3906 3.543-7.5898 1.6094-1.5703 3.75-2.9531 6.2812-4.0703-3.5508-4.5391-7.043-9.6328-9.8906-14.793-3.9805-7.2148-6.7305-14.633-6.7148-21-0.011718-9.0391 3.6562-17.227 9.5859-23.156 5.9297-5.9375 14.121-9.6055 23.164-9.6055 9.043 0 17.234 3.668 23.164 9.5977l0.13281 0.14453c5.8477 5.918 9.4609 14.051 9.457 23.02zm-19.918 39.816c-1.5859 1.8633-3.1445 3.5859-4.625 5.1172-1.1094 1.1484-2.3633 2.0156-3.7383 2.6016-1.3906 0.58984-2.8867 0.89062-4.4688 0.89062-1.5742 0-3.0664-0.29688-4.4609-0.88672-1.3906-0.58594-2.6445-1.4531-3.7422-2.5859-1.4883-1.5352-3.0586-3.2617-4.6484-5.1328-2.5508 0.96484-4.6406 2.2031-6.0938 3.6172-1.2891 1.2539-2.0195 2.625-2.0195 4.0156 0 2.3906 2.1133 4.6953 5.5234 6.4805 3.8984 2.0391 9.3555 3.3047 15.441 3.3047 6.0859 0 11.543-1.2656 15.441-3.3047 3.4141-1.7852 5.5234-4.0859 5.5234-6.4805 0-1.3906-0.73438-2.7656-2.0234-4.0234-1.4531-1.4141-3.5508-2.6523-6.1055-3.6172zm-12.836-55.996c4.457 0 8.5 1.8125 11.434 4.7461 2.9336 2.9219 4.7461 6.9688 4.7461 11.434 0 4.4531-1.8125 8.4961-4.7383 11.43l-0.007812 0.007813c-2.9375 2.9297-6.9766 4.7383-11.43 4.7383s-8.4961-1.8125-11.43-4.7383l-0.007813-0.007813c-2.9297-2.9375-4.7383-6.9766-4.7383-11.43 0-4.4648 1.8125-8.5117 4.7383-11.438l0.14844-0.13672c2.918-2.8477 6.9062-4.6055 11.289-4.6055zm7.9023 8.2695c-2.0156-2.0195-4.8086-3.2695-7.9023-3.2695-3.0391 0-5.7891 1.2031-7.793 3.1523l-0.11328 0.12109c-2.0195 2.0195-3.2734 4.8164-3.2734 7.9062 0 3.0938 1.25 5.8906 3.2617 7.9023l0.007813 0.007813c2.0156 2.0156 4.8086 3.2617 7.9023 3.2617s5.8906-1.25 7.9023-3.2617l0.007813-0.007813c2.0156-2.0156 3.2617-4.8086 3.2617-7.9023 0-3.0859-1.2539-5.8828-3.2734-7.9102zm13.746 26.465c3.6289-6.5703 6.1328-13.172 6.1211-18.555-0.011719-7.6094-3.0703-14.504-8.0195-19.52l-0.12109-0.11328c-5.0195-5.0195-11.965-8.1289-19.629-8.1289-7.668 0-14.609 3.1094-19.629 8.1289-5.0234 5.0156-8.1289 11.961-8.1289 19.633-0.023438 5.4258 2.4805 12.031 6.1016 18.598 4.7852 8.6758 11.48 17.16 17.027 22.879 0.64062 0.66016 1.3477 1.1562 2.1016 1.4766 0.74609 0.31641 1.5938 0.47656 2.5273 0.47656 0.92578 0 1.7656-0.16016 2.5156-0.48047 0.76562-0.32422 1.4688-0.81641 2.1016-1.4688 5.5469-5.7383 12.246-14.25 17.031-22.926z"/></svg>
        </circle>
      </div>

      <section v-if="type === 'books'">
        <h2>Books</h2>
      </section>

      <section v-if="type === 'videos'">
        <h2>Videos</h2>
      </section>

      <section v-if="type === 'websites'">
        <h2>Websites</h2>
      </section>

      <section v-if="type === 'locations'">
        <h2>Locations</h2>
      </section>

      <section class="scrolling" v-if="isFiltered">
        <box v-for="(resource, index) in resources" :key="index" :resource="resource" :href="resource.link" target="_blank">
          <h3>{{ resource.id }}</h3>
          <h5 v-if="type === 'books'" >{{ resource.subtitle }}</h5>
          <p>by {{ resource.author }} / published {{ resource.publication }} / ages <span class="nobreak">{{resource.age_range}}</span> years</p>
          <dash ></dash>
          <p>{{ resource.description }}</p>
        </box>
      </section>
    </card>
  </base-template>
</template>

<style scoped>
.circle {
  position: absolute;
  z-index: 99;
  svg {
    color: rgb(var(--bright-green));
    position: absolute;

    &.book {
      width: 85%;
      top: 5%;
      left: 8%;
    }
    &.video {
      width: 78%;
      top: 9%;
      left: 11%;
    }
    &.website {
      width: 95%;
      top: -2%;
      left: 3%;
    }
    &.location {
      width: 95%;
      top: -2%;
      left: 3%;
    }
  }
}

section {
  &:has(a:hover) {
    :deep(#dash) {
      border-color: rgb(var(--dark-green));
    }
  }
}

h5 {
  margin: 0.75rem 0 1.5rem 0;
}

a {
  height: auto;
}

p {
  hyphens: none;
}

:deep(#dash) {
  margin: 1.5rem 0 1rem 0;
}

</style>